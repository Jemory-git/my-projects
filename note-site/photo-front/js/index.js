define(["jquery"],function(n){return function(){var t,e=n(window).height(),o=n(window).width(),i=e-n("header").outerHeight(!0),c=n("#search-input"),r=n("#note-detail"),s=n("#new-note-textarea"),u=n("#placeholder"),l=(n("#new-note"),n(".body")),a=n("#cover"),d="<p><br></p>";function f(t){if(-1===n(t).html().indexOf("<p")){var e=document.createElement("p"),o=document.createElement("br"),i=window.getSelection().getRangeAt(0);e.appendChild(o),i.insertNode(e)}}function h(n,t,e,o){t.on(n,function(n){var t=n.target;t.className.indexOf(e)>-1&&o(t)})}n("main").height(i),n("#detail-container").height(i),l.height(e),a.on("input",function(){"open"===this.textContent&&a.remove()}),n("#search-btn").on("click",function(n){c.css("padding-left","10px").width("80%").trigger("click").focus()}),c.on("blur",function(n){t=!0,window.setTimeout(function(){t&&(c[0].style.width="0px",c[0].style.paddingLeft="0px")},200)}),c.on("focus",function(n){t=!1}),s.on("focus",function(){u.hide(),this.innerHTML=d,d="<p><br></p>",o<769&&s.css("margin","50% auto 10%")}),s.on("blur",function(){d=this.innerHTML,s.css("margin","auto"),0==this.textContent&&u.show()}),n(document).on("keyup",function(n){var t=n.which||n.keycode;s.is(":focus")&&8==t?f(s):r.is(":focus")&&8==t&&f(r)}),function(){if(o<769){var t,e=n(".scrollerY");e.on("scroll",function(){(t=this.scrollTop)<2&&t>-2&&(this.scrollTop=1)}),e[0].scrollTop=1,h("click",l,"second-category",function(n){-1===n.parentNode.dataset.id.indexOf("o")&&(e[1].scrollTop=1)}),h("click",l,"icon-plus",function(n){e[2].scrollTop=1})}}()}});